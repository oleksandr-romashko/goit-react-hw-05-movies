{"version":3,"file":"static/js/42.2132f6e5.chunk.js","mappings":"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","sources":["webpack://react-homework-template/./src/pages/MovieDetailsPage/MovieDetailsPage.module.css?9108","pages/MovieDetailsPage/MovieDetailsPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"back-navigation\":\"MovieDetailsPage_back-navigation__hWhsh\",\"back-navigation-link\":\"MovieDetailsPage_back-navigation-link__g7SVH\",\"movie\":\"MovieDetailsPage_movie__ge9gn\",\"details\":\"MovieDetailsPage_details__pkcOH\",\"preview-wrapper\":\"MovieDetailsPage_preview-wrapper__a09Rc\",\"preview-image\":\"MovieDetailsPage_preview-image__YBRHX\",\"description\":\"MovieDetailsPage_description__JSzNh\",\"movie-title\":\"MovieDetailsPage_movie-title__wswFf\",\"movie-subtitle\":\"MovieDetailsPage_movie-subtitle__EvNz9\",\"genres-list\":\"MovieDetailsPage_genres-list__Wf0FC\"};","import { Suspense, useState, useEffect, useRef } from \"react\";\nimport { Link, Outlet, useParams, useLocation, Navigate } from \"react-router-dom\";\nimport { AdditionalInfo, Loader, Container, FallbackUI } from \"components\";\nimport api from \"services/api\";\nimport noImage from \"images/no-image.jpg\";\nimport css from \"./MovieDetailsPage.module.css\";\n\nconst MovieDetailsPage = () => {\n  const { movieId } = useParams();\n  const location = useLocation();\n  const backLink = useRef(location.state?.from ?? \"/\");\n  const [movieDetails, setMovieDetails] = useState({});\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [shouldNavigateHome, setShouldNavigateHome] = useState(false)\n\n  useEffect(() => {\n    if (!movieId) {\n      return;\n    };\n\n    setIsLoading(true);\n    api.getMovieDetailsById(movieId)\n      .then(movie => {\n        if (movie.adult) {\n          setShouldNavigateHome(true);\n          return;\n        }\n        setMovieDetails(movie);\n      })\n      .catch(error => {\n        setError(error);\n        console.error(error);\n      })\n      .finally(() => {\n        setIsLoading(false)\n      });\n  }, [movieId]);\n\n  /**\n   * Redirects to home page when specific condition met.\n   * \n   * This variant instead of inline navigate(\"/\") of useNavigate hook prevents \n   * parent rerender while using sub routes (as it is necessary to include \n   * navigate as a dependency in useEffect dependencies, \n   * which causes rerenders).\n   */\n  if (shouldNavigateHome) {\n    return <Navigate to=\"/\" />\n  }\n\n  /**\n   * Prevents cases when back link matches current location and back link does not work.\n   * Occurs when link to the movie was provided and browser back btn used.\n   */\n  if (location.pathname === backLink.current.pathname) {\n    backLink.current = \"/\";\n  }\n\n  const {title, overview, poster_path, release_date, vote_average, genres} = movieDetails;\n  const releaseYear = release_date && new Date(release_date).getFullYear();\n  const posterUrl = poster_path ? `${api.IMAGE_BASE_URL}${api.IMAGE_POSTER_SIZE}${poster_path}` : noImage;\n\n  return (\n    <>\n      <section className={css[\"back-navigation\"]}>\n        <Container>\n          <Link \n            to={backLink.current}\n            className={css[\"back-navigation-link\"]} \n          >\n            Go back\n          </Link>\n        </Container>\n      </section>\n\n      {isLoading ? <Loader /> : \n        <section className={css[\"movie\"]}>\n          <Container>\n            {error ? <FallbackUI /> :\n              <div className={css.details}>\n                <div className={css[\"preview-wrapper\"]}>\n                  <img \n                    className={css[\"preview-image\"]} \n                    src={posterUrl} \n                    alt=\"poster\" \n                    aria-label={`${title} preview`} \n                  />\n                </div>\n                <div className={css.description}>\n                  <div>\n                    <h1 className={css[\"movie-title\"]}>{title} {releaseYear && `(${releaseYear})`}</h1>\n                    <p>User Score: {Math.trunc(vote_average * 10)}%</p>\n                  </div>\n                  <div>\n                    <h2 className={css[\"movie-subtitle\"]}>Overview</h2>\n                    <p>{overview}</p>\n                  </div>\n                  <div>\n                    <h2 className={css[\"movie-subtitle\"]}>Genres</h2>\n                    <ul className={css[\"genres-list\"]}>\n                      {genres && genres.map(({name})=> (\n                        <li key={name}>\n                          <span>{name}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            }\n          </Container>\n        </section>\n      }\n\n      <section>\n        <Container>\n          <AdditionalInfo />\n          <Suspense fallback={<Loader />}>\n            <Outlet />\n          </Suspense>\n        </Container>\n      </section>\n    </>\n  )\n};\n\nexport default MovieDetailsPage;"],"names":["MovieDetailsPage","_location$state$from","_location$state","movieId","useParams","location","useLocation","backLink","useRef","state","from","movieDetails","setMovieDetails","useState","isLoading","setIsLoading","error","setError","shouldNavigateHome","setShouldNavigateHome","useEffect","api","then","movie","adult","catch","console","finally","_jsx","Navigate","to","pathname","current","title","overview","poster_path","release_date","vote_average","genres","releaseYear","Date","getFullYear","posterUrl","concat","noImage","_jsxs","_Fragment","children","className","css","Container","Link","Loader","FallbackUI","src","alt","Math","trunc","map","_ref","name","AdditionalInfo","Suspense","fallback","Outlet"],"sourceRoot":""}